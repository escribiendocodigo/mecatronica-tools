<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Generador hexadecimal - matriz 8x8</title>
    <meta name="description" content="Permite generar de una manera facil el valor hexadecimal de una palabra usando matrices 8x8">
    <style>
        #btnAgregarMatriz {
            cursor: pointer;
        }

        form.matriz {
            float: left;
        }

        form.matriz tr.a {
            background-color: #BFFFE8;
        }

        form.matriz tr.b {
            background-color: #F9ECD0;
        }

        form.matriz input[type="checkbox"] {
            cursor: pointer;
        }

        form.matriz input.led[type="checkbox"],
        form.matriz input.total[type="text"] {

            width: 20px;
            height: 20px;
        }

        form.matriz input.total[type="text"] {
            border: none;
            text-align: center;
            vertical-align: middle;
            background-color: transparent;
        }

    </style>
</head>
<body>

    <h1 id="palabraHex">&nbsp;</h1>

    <div id="matrizContainer">
        <!-- aqui se insertaran las matrices -->
    </div>

    <button id="btnAgregarMatriz" type="button">
        Agregar matriz
    </button>



    <template id="matrizTemplate">

        <form class="matriz">
            <table>
                <thead>
                    <tr>
                        <td></td>
                        <td colspan="8">
                            <input type="text" value="0000000000000000" maxlength="16" class="caracterHex">
                        </td>
                    </tr>
                </thead>
                <tbody>
                    <tr class="a">
                        <th>
                            a<sub>1</sub> = 1
                        </th>
                        <td><input type="checkbox" value="1" data-columna="0" data-fila="0" class="led a"></td>
                        <td><input type="checkbox" value="1" data-columna="1" data-fila="0" class="led a"></td>
                        <td><input type="checkbox" value="1" data-columna="2" data-fila="0" class="led a"></td>
                        <td><input type="checkbox" value="1" data-columna="3" data-fila="0" class="led a"></td>
                        <td><input type="checkbox" value="1" data-columna="4" data-fila="0" class="led a"></td>
                        <td><input type="checkbox" value="1" data-columna="5" data-fila="0" class="led a"></td>
                        <td><input type="checkbox" value="1" data-columna="6" data-fila="0" class="led a"></td>
                        <td><input type="checkbox" value="1" data-columna="7" data-fila="0" class="led a"></td>
                    </tr>
                    <tr class="a">
                        <th>
                            a<sub>2</sub> = 2
                        </th>
                        <td><input type="checkbox" value="2" data-columna="0" data-fila="1" class="led a"></td>
                        <td><input type="checkbox" value="2" data-columna="1" data-fila="1" class="led a"></td>
                        <td><input type="checkbox" value="2" data-columna="2" data-fila="1" class="led a"></td>
                        <td><input type="checkbox" value="2" data-columna="3" data-fila="1" class="led a"></td>
                        <td><input type="checkbox" value="2" data-columna="4" data-fila="1" class="led a"></td>
                        <td><input type="checkbox" value="2" data-columna="5" data-fila="1" class="led a"></td>
                        <td><input type="checkbox" value="2" data-columna="6" data-fila="1" class="led a"></td>
                        <td><input type="checkbox" value="2" data-columna="7" data-fila="1" class="led a"></td>
                    </tr>
                    <tr class="a">
                        <th>
                            a<sub>3</sub> = 4
                        </th>
                        <td><input type="checkbox" value="4" data-columna="0" data-fila="2" class="led a"></td>
                        <td><input type="checkbox" value="4" data-columna="1" data-fila="2" class="led a"></td>
                        <td><input type="checkbox" value="4" data-columna="2" data-fila="2" class="led a"></td>
                        <td><input type="checkbox" value="4" data-columna="3" data-fila="2" class="led a"></td>
                        <td><input type="checkbox" value="4" data-columna="4" data-fila="2" class="led a"></td>
                        <td><input type="checkbox" value="4" data-columna="5" data-fila="2" class="led a"></td>
                        <td><input type="checkbox" value="4" data-columna="6" data-fila="2" class="led a"></td>
                        <td><input type="checkbox" value="4" data-columna="7" data-fila="2" class="led a"></td>
                    </tr>
                    <tr class="a">
                        <th>
                            a<sub>4</sub> = 8
                        </th>
                        <td><input type="checkbox" value="8" data-columna="0" data-fila="3" class="led a"></td>
                        <td><input type="checkbox" value="8" data-columna="1" data-fila="3" class="led a"></td>
                        <td><input type="checkbox" value="8" data-columna="2" data-fila="3" class="led a"></td>
                        <td><input type="checkbox" value="8" data-columna="3" data-fila="3" class="led a"></td>
                        <td><input type="checkbox" value="8" data-columna="4" data-fila="3" class="led a"></td>
                        <td><input type="checkbox" value="8" data-columna="5" data-fila="3" class="led a"></td>
                        <td><input type="checkbox" value="8" data-columna="6" data-fila="3" class="led a"></td>
                        <td><input type="checkbox" value="8" data-columna="7" data-fila="3" class="led a"></td>
                    </tr>
                    <!--  -->
                    <tr class="b">
                        <th>
                            b<sub>1</sub> = 1
                        </th>
                        <td><input type="checkbox" value="1" data-columna="0" data-fila="4" class="led b"></td>
                        <td><input type="checkbox" value="1" data-columna="1" data-fila="4" class="led b"></td>
                        <td><input type="checkbox" value="1" data-columna="2" data-fila="4" class="led b"></td>
                        <td><input type="checkbox" value="1" data-columna="3" data-fila="4" class="led b"></td>
                        <td><input type="checkbox" value="1" data-columna="4" data-fila="4" class="led b"></td>
                        <td><input type="checkbox" value="1" data-columna="5" data-fila="4" class="led b"></td>
                        <td><input type="checkbox" value="1" data-columna="6" data-fila="4" class="led b"></td>
                        <td><input type="checkbox" value="1" data-columna="7" data-fila="4" class="led b"></td>
                    </tr>
                    <tr class="b">
                        <th>
                            b<sub>2</sub> = 2
                        </th>
                        <td><input type="checkbox" value="2" data-columna="0" data-fila="5" class="led b"></td>
                        <td><input type="checkbox" value="2" data-columna="1" data-fila="5" class="led b"></td>
                        <td><input type="checkbox" value="2" data-columna="2" data-fila="5" class="led b"></td>
                        <td><input type="checkbox" value="2" data-columna="3" data-fila="5" class="led b"></td>
                        <td><input type="checkbox" value="2" data-columna="4" data-fila="5" class="led b"></td>
                        <td><input type="checkbox" value="2" data-columna="5" data-fila="5" class="led b"></td>
                        <td><input type="checkbox" value="2" data-columna="6" data-fila="5" class="led b"></td>
                        <td><input type="checkbox" value="2" data-columna="7" data-fila="5" class="led b"></td>
                    </tr>
                    <tr class="b">
                        <th>
                            b<sub>3</sub> = 4
                        </th>
                        <td><input type="checkbox" value="4" data-columna="0" data-fila="6" class="led b"></td>
                        <td><input type="checkbox" value="4" data-columna="1" data-fila="6" class="led b"></td>
                        <td><input type="checkbox" value="4" data-columna="2" data-fila="6" class="led b"></td>
                        <td><input type="checkbox" value="4" data-columna="3" data-fila="6" class="led b"></td>
                        <td><input type="checkbox" value="4" data-columna="4" data-fila="6" class="led b"></td>
                        <td><input type="checkbox" value="4" data-columna="5" data-fila="6" class="led b"></td>
                        <td><input type="checkbox" value="4" data-columna="6" data-fila="6" class="led b"></td>
                        <td><input type="checkbox" value="4" data-columna="7" data-fila="6" class="led b"></td>
                    </tr>
                    <tr class="b">
                        <th>
                            b<sub>4</sub> = 8
                        </th>
                        <td><input type="checkbox" value="8" data-columna="0" data-fila="7" class="led b"></td>
                        <td><input type="checkbox" value="8" data-columna="1" data-fila="7" class="led b"></td>
                        <td><input type="checkbox" value="8" data-columna="2" data-fila="7" class="led b"></td>
                        <td><input type="checkbox" value="8" data-columna="3" data-fila="7" class="led b"></td>
                        <td><input type="checkbox" value="8" data-columna="4" data-fila="7" class="led b"></td>
                        <td><input type="checkbox" value="8" data-columna="5" data-fila="7" class="led b"></td>
                        <td><input type="checkbox" value="8" data-columna="6" data-fila="7" class="led b"></td>
                        <td><input type="checkbox" value="8" data-columna="7" data-fila="7" class="led b"></td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr class="a">
                        <th>
                            a<sub>&sum;</sub>
                        </th>
                        <td><input type="text" value="0" readonly data-columna="0" class="total a"></td>
                        <td><input type="text" value="0" readonly data-columna="1" class="total a"></td>
                        <td><input type="text" value="0" readonly data-columna="2" class="total a"></td>
                        <td><input type="text" value="0" readonly data-columna="3" class="total a"></td>
                        <td><input type="text" value="0" readonly data-columna="4" class="total a"></td>
                        <td><input type="text" value="0" readonly data-columna="5" class="total a"></td>
                        <td><input type="text" value="0" readonly data-columna="6" class="total a"></td>
                        <td><input type="text" value="0" readonly data-columna="7" class="total a"></td>
                    </tr>
                    <tr class="b">
                        <th>
                            b<sub>&sum;</sub>
                        </th>
                        <td><input type="text" value="0" readonly data-columna="0" class="total b"></td>
                        <td><input type="text" value="0" readonly data-columna="1" class="total b"></td>
                        <td><input type="text" value="0" readonly data-columna="2" class="total b"></td>
                        <td><input type="text" value="0" readonly data-columna="3" class="total b"></td>
                        <td><input type="text" value="0" readonly data-columna="4" class="total b"></td>
                        <td><input type="text" value="0" readonly data-columna="5" class="total b"></td>
                        <td><input type="text" value="0" readonly data-columna="6" class="total b"></td>
                        <td><input type="text" value="0" readonly data-columna="7" class="total b"></td>
                    </tr>
                </tfoot>
            </table>
        </form>

    </template>



    <script>
        var palabraHex,
            matrizContainer,
            matrizTemplate,
            btnAgregarMatriz;



        document.addEventListener('DOMContentLoaded', function (event) {

            palabraHex = document.getElementById('palabraHex'),
            matrizContainer = document.getElementById('matrizContainer'),
            matrizTemplate = document.getElementById('matrizTemplate'),
            btnAgregarMatriz = document.getElementById('btnAgregarMatriz');


            btnAgregarMatriz.addEventListener('click', btnAgregarMatriz_click);

        });



        function btnAgregarMatriz_click(event) {

            var frmMatrizHtml = document.importNode(matrizTemplate.content, true),
                frmMatriz,
                txtCaracterHex,
                txtLeds;


            matrizContainer.appendChild(frmMatrizHtml);
            frmMatriz = matrizContainer.querySelector('form:last-child');

            txtCaracterHex = frmMatriz.querySelector('input.caracterHex[type="text"]');
            txtLeds = frmMatriz.querySelectorAll('input.led[type="checkbox"]');


            txtCaracterHex.addEventListener('change', txtCaracterHex_change);


            for (var i = 0, length = txtLeds.length; i < length; i++) {

                var txtLed = txtLeds[i];

                txtLed.addEventListener('change', txtLed_change);
            }


            mostrarPalabraHex();
        }


        function txtCaracterHex_change(event) {

        }


        function txtLed_change(event) {

            var txtLed = event.target,
                frmMatriz = txtLed.form,
                columna = txtLed.dataset['columna'];


            var txtLedsA = frmMatriz.querySelectorAll('input.led.a[data-columna="' + columna + '"]:checked'),
                txtLedsB = frmMatriz.querySelectorAll('input.led.b[data-columna="' + columna + '"]:checked');

            var txtTotalA = frmMatriz.querySelector('input.total.a[data-columna="' + columna + '"]'),
                txtTotalB = frmMatriz.querySelector('input.total.b[data-columna="' + columna + '"]');

            var totalA = 0,
                totalB = 0;



            for (var i = 0, length = txtLedsA.length; i < length; i++) {

                var txtLedA = txtLedsA[i];


                totalA += parseInt(txtLedA.value);
            }


            for (var i = 0, length = txtLedsB.length; i < length; i++) {

                var txtLedB = txtLedsB[i];


                totalB += parseInt(txtLedB.value);
            }


            txtTotalA.value = totalA.toString(16).toUpperCase();
            txtTotalB.value = totalB.toString(16).toUpperCase();


            mostrarCaracterHex(frmMatriz);
            mostrarPalabraHex();

        }



        function mostrarCaracterHex(frmMatriz) {

            var txtCaracterHex = frmMatriz.querySelector('input.caracterHex'),
                txtTotalesA = frmMatriz.querySelectorAll('input.total.a'),
                txtTotalesB = frmMatriz.querySelectorAll('input.total.b'),
                caracterHex = '';


            for (var i = 0, length = txtTotalesA.length; i < length; i++) {

                var txtTotalA = txtTotalesA[i],
                    txtTotalB = txtTotalesB[i];

                caracterHex += txtTotalB.value + txtTotalA.value;
            }


            txtCaracterHex.value = caracterHex;

        }


        function mostrarPalabraHex() {

            var frmMatrices = matrizContainer.querySelectorAll('form.matriz'),
                palabra = '';


            palabraHex.innerHTML = '';



            for (var i = 0; i < frmMatrices.length; i++) {

                var frmMatriz = frmMatrices[i],
                    txtCaracterHex = frmMatriz.querySelector('input.caracterHex');


                palabra += txtCaracterHex.value;
            }


            palabraHex.innerHTML = palabra;

        }

    </script>

</body>
</html>